slice(-(1:2))
# Filter for participants who passed attention check
passed_attn_check <- pilot_data %>%
filter(attn_check == "4" & attn_check_4_TEXT == "8")
# Chunk 3
# Rename condition column
pilot_data_renamed <- passed_attn_check %>%
rename(condition = FL_3_DO) %>%
relocate(condition, .after = attn_check_4_TEXT) %>%
mutate(condition = case_when(condition == "GuidedInstructions" ~ "high-agency",
condition == "UnguidedInstructions" ~ "low-agency",
condition == "ControlInstructions" ~ "Control"))
# Filter for participants who correctly answered the memory check question about the condition to which they were assigned
# 1 = "Stay in control of the AI tool" (high-agency)
# 2 = "Let the AI tool do the heavy lifting (low-agency)
# 3 = "Don't use AI" (Control)
memory_check <- high-agency_data_renamed %>%
mutate(memory_check_condition = case_when(memory_check == "1" ~ "high-agency",
memory_check == "2" ~ "low-agency",
is.na(memory_check) ~ "Control")) %>%
relocate(memory_check_condition, .after = "memory_check") %>%
mutate(memory_check_result = if_else(condition == memory_check_condition, 1, 0)) %>%
relocate(memory_check_result, .after = "memory_check_condition")
trial_data <- pilot_data_renamed %>%
pivot_longer(names_to = "trial",
values_to = "use",
cols = starts_with(c("high-agency", "pass", "control"))) %>%
mutate(trial = str_remove(trial, "open_")) %>%
filter(!is.na(use)) %>%
relocate(trial, .after = "condition") %>%
relocate(use, .after = "trial") %>%
mutate(object = str_extract(trial, "(?<=_).*")) %>%
mutate(object = str_remove(object, "_.*")) %>%
relocate(object, .after = "trial") %>%
mutate(object = if_else(object == "bubble", "bubblewrap", object))
iriss <- read_csv("data/iriss.csv") %>%
slice(-(1:2)) %>%
filter(attn_check == "4" & attn_check_4_TEXT == "8") %>%
rename(condition = FL_3_DO) %>%
relocate(condition, .after = attn_check_4_TEXT) %>%
mutate(condition = case_when(condition == "GuidedInstructions" ~ "high-agency",
condition == "UnguidedInstructions" ~ "low-agency",
condition == "ControlInstructions" ~ "Control")) %>%
filter(Progress=="100") %>%
rename(submitter_id = "ResponseId") %>%
mutate(age = as.numeric(age))
iriss %>%
get_summary_stats(age, type="mean_sd")
submitter_demographics <- iriss %>%
mutate(gender = case_when(gender == "1" ~ "Male",
gender == "2" ~ "Female",
gender == "3" ~ "Non-binary",
gender == "4" ~ "Prefer to self-describe")) %>%
mutate(race = case_when(race == "1" ~ "Black or African-American",
race == "2" ~ "American Indian or Alaskan Native",
race == "3" ~ "White or Caucasian",
race == "4" ~ "Native Hawaiian",
race == "5" ~ "Hispanic, Latino or Spanish Origin",
race == "6" ~ "Asian-American",
race == "7" ~ "Multiracial or self-described")) %>%
mutate(race = fct_infreq(race)) %>%
dplyr::select(submitter_id, age, gender, race)
submitter_demographics %>%
tbl_summary(include = c(age, gender, race),
statistic = list(
all_continuous() ~ "{mean} ({sd})",
all_categorical() ~ "{n} / {N} ({p}%)"),
digits = all_continuous() ~ 1,
label = list(age = "Age",
gender = "Gender",
race = "Race")) %>%
modify_header(label ~ "**Demographic**")
iriss_memory_check <- iriss %>%
mutate(memory_check_condition = case_when(memory_check == "1" ~ "high-agency",
memory_check == "2" ~ "low-agency",
is.na(memory_check) ~ "Control")) %>%
relocate(memory_check_condition, .after = "memory_check") %>%
mutate(memory_check_result = if_else(condition == memory_check_condition, 1, 0)) %>%
relocate(memory_check_result, .after = "memory_check_condition")
# Check the % of participants who remembered what the instructions said
iriss_memory_check %>%
count(memory_check_result) %>%
mutate(prop=n/sum(n))
iriss_memory_check %>%
count(condition)
# Convert to long format
iriss_trial_data <- iriss %>%
pivot_longer(names_to = "trial",
values_to = "use",
cols = starts_with(c("pilot", "pass", "control"))) %>%
mutate(trial = str_remove(trial, "open_")) %>% # fixed naming problem
filter(grepl("^(pilot|pass|control)_(brick|frisbee|bubble)_[1-5]$", trial)) %>%
filter(!is.na(use)) %>% # Keep only the trials with responses
relocate(trial, .after = "condition") %>%
relocate(use, .after = "trial") %>%
mutate(object = str_extract(trial, "(?<=_).*")) %>%
mutate(object = str_remove(object, "_.*")) %>%
relocate(object, .after = "trial") %>%
mutate(object = if_else(object == "bubble", "bubblewrap", object))
write_csv(iriss_trial_data, "data/iriss_trial_data.csv")
iriss_self_perceptions <- iriss %>%
pivot_longer(names_to = "metric",
values_to = "rating",
cols = c(ends_with("_unique"),
matches("self_[1-3]$"))) %>%
drop_na(rating) %>%
mutate(metric = str_replace_all(metric,
c("self_1" = "creativity",
"self_2" = "originality",
"self_3" = "usefulness"))) %>%
separate(
col = metric,
into = c("condition", "object", "question"),
sep = "_",
remove = TRUE# keep original column if you still want it
) %>%
mutate(
object = str_replace_all(
object,
c("\\bfris\\b" = "frisbee",
"\\bbubb\\b"  = "bubble"))) %>%
mutate(condition = case_when(condition == "pilot" ~ "High-Agency",
condition == "pass" ~ "Low-Agency",
condition == "control" ~ "Control")) %>%
pivot_wider(names_from = "question",
values_from = "rating") %>%
mutate(across(c(creativity, originality, usefulness), as.numeric))
# How unique did participants think their ideas were?
perceived_uniqueness <- iriss_self_perceptions %>%
drop_na(unique) %>%
group_by(condition) %>%
count(unique) %>%
mutate(prop=n/sum(n)) %>%
ggplot(aes(x=unique, y=prop, fill=condition)) +
geom_col(position = "dodge") +
scale_x_discrete(labels = c(
"1" = "No one",
"2" = "Some people",
"3" = "Most people",
"4" = "Everyone"
)) +
labs(x="How many people came up with this idea?",
y="Proportion of responses") +
theme_apa()
ggsave("figures/uniqueness.png", plot=perceived_uniqueness)
iriss_manual_ratings_long <- iriss_manual_ratings %>%
rename(rater_id = ResponseId) %>%
pivot_longer(cols = frisbee.0.condition:bubblewrap.4.use,
names_to = "stimulus_metadata",
values_to = "value") %>%
mutate(metadata = str_extract(stimulus_metadata, "[^.]+$"),
stimulus_metadata = str_remove(stimulus_metadata, "\\.[^.]+$")) %>%
separate_wider_delim(stimulus_metadata,
".",
names = c("object", "trial_num")) %>%
pivot_wider(
names_from = "metadata",
values_from = "value") %>%
rename(submitter_id = ResponseId)
# Pivot to give each creativity rating its own column
iriss_manual_ratings_metrics <- iriss_manual_ratings_long %>%
pivot_longer(cols = c_frisbee_1:u_bubble_5,
names_to = "trial",
values_to = "rating") %>%
mutate(rating = as.numeric(rating)) %>%
mutate(metric = str_extract(trial, "^[A-Za-z]+(?=_)")) %>%
mutate(metric = case_when(metric == "c" ~ "creativity",
metric == "o" ~ "originality",
metric == "u" ~ "usefulness")) %>%
dplyr::select(rater_id, object, trial_num, submitter_id, condition, use, trial, metric, rating) %>%
mutate(trial = str_remove(trial, "^._")) %>%
mutate(trial_num = as.numeric(trial_num),
trial_num = trial_num+1) %>%
unite(col="stimulus", c("object", "trial_num")) %>%
mutate(trial = str_replace_all(trial, "bubble", "bubblewrap")) %>% # Check names!
filter(stimulus==trial) %>%
pivot_wider(names_from = "metric",
values_from = "rating") %>%
mutate(object = str_extract(stimulus, "^[A-Za-z]+")) %>%
relocate(object, .after = "stimulus") %>%
mutate(use_word_count = str_count(use, "\\S+")) %>%
relocate(use_word_count, .after = use) %>%
mutate(condition=case_when(condition=="Pilot"~"High-Agency",
condition=="Passenger"~"Low-Agency",
condition=="Control"~"Control"))
# Select process variables from full dataset
process_vars <- iriss_trial_data %>%
dplyr::select(submitter_id, object, use, starts_with("conv_with_ai"), starts_with("consideration_aid"), starts_with("intrinsic_motivation"))
write_csv(iriss_manual_ratings_metrics, "data/iriss_manual_ratings_metrics.csv")
# Number of conversations that actually got rated
iriss_conversations <- iriss_trial_data %>%
group_by(submitter_id, condition, object) %>%
summarize(aggregated_uses = paste(use, collapse = "; "))
compliant_conversations <- iriss_conversations %>%
anti_join(noncompliant_conversations)
evaluated_conversations <- iriss_manual_ratings_metrics %>%
group_by(submitter_id, condition, object) %>%
summarize(aggregated_uses = paste(use, collapse = "; "))
unevaluated_conversations <- iriss_conversations %>%
anti_join(evaluated_conversations, by=c("submitter_id", "condition", "object"))
# Exclude the noncompliant conversations from the analysis
evaluated_compliant_conversations <- evaluated_conversations %>%
anti_join(noncompliant_conversations, by=c("submitter_id", "condition", "object"))
evaluated_compliant_conversations %>%
group_by(condition) %>%
summarize(unique_people = n_distinct(submitter_id))
write_csv(evaluated_compliant_conversations, "data/evaluated_compliant_conversations.csv")
iriss_conversations %>%
anti_join(noncompliant_conversations, by=c("submitter_id", "object"))
# compliant_trials <- iriss_manual_ratings_metrics %>%
#   anti_join(noncompliant, by=c("submitter_id", "object")) %>%
#   left_join(process_vars, by=c("submitter_id", "object", "use"), relationship="many-to-many") %>%
#   mutate(across(conv_with_ai_1:intrinsic_motivation_4, as.numeric),
#          intrinsic_motivation_mean = rowMeans(
#       across(intrinsic_motivation_1:intrinsic_motivation_4),
#       na.rm = TRUE
#     )) %>%
#     mutate(
#          conv_with_ai_mean = rowMeans(
#       across(conv_with_ai_1:conv_with_ai_3),
#       na.rm = TRUE
#     )) %>%
#     mutate(
#          consideration_aid_mean = rowMeans(
#       across(consideration_aid_1:consideration_aid_3),
#       na.rm = TRUE
#     ))
compliant_trials %>%
distinct(condition, submitter_id, object) %>%
filter(condition != "Control") %>%
count(condition)
compliant_trials <- iriss_manual_ratings_metrics %>%
anti_join(noncompliant, by=c("submitter_id", "object")) %>%
left_join(process_vars, by=c("submitter_id", "object", "use"), relationship="many-to-many") %>%
mutate(across(conv_with_ai_1:intrinsic_motivation_4, as.numeric),
intrinsic_motivation_mean = rowMeans(
across(intrinsic_motivation_1:intrinsic_motivation_4),
na.rm = TRUE
)) %>%
mutate(
conv_with_ai_mean = rowMeans(
across(conv_with_ai_1:conv_with_ai_3),
na.rm = TRUE
)) %>%
mutate(
consideration_aid_mean = rowMeans(
across(consideration_aid_1:consideration_aid_3),
na.rm = TRUE
))
compliant_trials <- iriss_manual_ratings_metrics %>%
anti_join(noncompliant, by=c("submitter_id", "object")) %>%
left_join(process_vars, by=c("submitter_id", "object", "use"), relationship="many-to-many") %>%
mutate(across(conv_with_ai_1:intrinsic_motivation_4, as.numeric),
intrinsic_motivation_mean = rowMeans(
across(intrinsic_motivation_1:intrinsic_motivation_4),
na.rm = TRUE
)) %>%
mutate(
conv_with_ai_mean = rowMeans(
across(conv_with_ai_1:conv_with_ai_3),
na.rm = TRUE
)) %>%
mutate(
consideration_aid_mean = rowMeans(
across(consideration_aid_1:consideration_aid_3),
na.rm = TRUE
))
excluded_participants <- noncompliant %>%
count(submitter_id, condition) %>%
filter(n==3) %>%
arrange(condition)
noncompliant_conversations <- bind_rows(no_chats_high_agency, no_chats_low_agency) %>%
rename(submitter_id = participant_id)
# Number of noncompliant conversations
noncompliant_conversations %>%
group_by(condition) %>%
summarize(n_distinct(submitter_id))
excluded_participants <- noncompliant %>%
count(submitter_id, condition) %>%
filter(n==3) %>%
arrange(condition)
# Add age and gender covariates
demographics_recoded <- submitter_demographics %>%
mutate(gender=if_else(gender=="Female",1, 0),
race=if_else(race=="White or Caucasian",1,0))
similarity_demographics <- left_join(compliant_similarities, demographics_recoded, by="submitter_id")
sjPlot::tab_model(compliant_creativity_mod, compliant_originality_mod, compliant_usefulness_mod,
pred.labels = c("Intercept",
"Low-Agency Condition",
"High-Agency Condition",
"Age",
"Gender (Female)",
"Race (White)"),
string.ci = "95% CI",
dv.labels = c("Creativity", "Originality", "Usefulness"))
compliant_trials_demographics %>%
group_by(condition) %>%
arrange(desc(n))
compliant_trials_demographics <- left_join(compliant_trials, demographics_recoded, by="submitter_id")
evaluated_compliant_ideas <- iriss_trial_data %>%
anti_join(unevaluated_conversations, by=c("submitter_id", "object")) %>%
anti_join(noncompliant_conversations, by=c("submitter_id", "object"))
evaluated_compliant_ideas %>%
group_by(condition) %>%
arrange(desc(n))
View(evaluated_compliant_ideas)
evaluated_compliant_ideas <- iriss_trial_data %>%
anti_join(noncompliant_conversations, by=c("submitter_id", "object"))
evaluated_compliant_ideas %>%
group_by(condition) %>%
arrange(desc(n))
evaluated_compliant_ideas <- iriss_trial_data %>%
anti_join(noncompliant_conversations, by=c("submitter_id", "object")) %>%
anti_join(unevaluated_conversations, by=c("submitter_id", "object"))
unevaluated_conversations <- iriss_conversations %>%
anti_join(evaluated_conversations, by=c("submitter_id", "condition", "object"))
evaluated_conversations <- iriss_manual_ratings_metrics %>%
group_by(submitter_id, condition, object) %>%
summarize(aggregated_uses = paste(use, collapse = "; "))
unevaluated_conversations <- iriss_conversations %>%
anti_join(evaluated_conversations, by=c("submitter_id", "condition", "object"))
View(unevaluated_conversations)
noncompliant_conversations <- bind_rows(no_chats_high_agency, no_chats_low_agency) %>%
rename(submitter_id = participant_id)
iriss_conversations <- iriss_trial_data %>%
group_by(submitter_id, condition, object) %>%
summarize(aggregated_uses = paste(use, collapse = "; "))
compliant_conversations <- iriss_conversations %>%
anti_join(noncompliant_conversations)
evaluated_conversations <- iriss_manual_ratings_metrics %>%
group_by(submitter_id, condition, object) %>%
summarize(aggregated_uses = paste(use, collapse = "; "))
unevaluated_conversations <- iriss_conversations %>%
anti_join(evaluated_conversations, by=c("submitter_id", "condition", "object"))
View(noncompliant_conversations)
evaluated_compliant_conversations <- evaluated_conversations %>%
anti_join(noncompliant_conversations, by=c("submitter_id", "condition", "object"))
View(evaluated_compliant_conversations)
write_csv(evaluated_compliant_conversations, "data/evaluated_compliant_conversations.csv")
evaluated_compliant_ideas %>%
group_by(condition) %>%
count(use)
evaluated_compliant_ideas %>%
group_by(condition) %>%
count(use) %>%
arrange(desc(n))
evaluated_compliant_ideas %>%
group_by(condition) %>%
mutate(use = str_to_lower(use)) %>%
count(use) %>%
arrange(desc(n))
evaluated_compliant_ideas %>%
group_by(condition) %>%
mutate(use = str_to_lower(use)) %>%
group_by(condition) %>%
count(use) %>%
arrange(desc(n))
evaluated_compliant_ideas %>%
group_by(condition) %>%
mutate(use = str_to_lower(use)) %>%
group_by(condition) %>%
count(use) %>%
arrange(desc(n)) %>%
print(n=600)
evaluated_compliant_ideas <- evaluated_compliant_conversations %>%
separate_rows(aggregated_uses, sep = ";")
evaluated_compliant_ideas <- evaluated_compliant_conversations %>%
separate_rows(aggregated_uses, sep = ";") %>%
rename(use="aggregated_uses")
write_csv(evaluated_compliant_ideas, "data/evaluated_compliant_ideas.csv")
evaluated_compliant_ideas %>%
mutate(use = str_to_lower(use)) %>%
group_by(condition) %>%
count(use) %>%
arrange(desc(n))
evaluated_compliant_ideas %>%
mutate(use = str_to_lower(use)) %>%
group_by(condition) %>%
count(use) %>%
arrange(desc(n)) %>%
print(n=1500)
View(evaluated_compliant_ideas)
evaluated_compliant_ideas <- evaluated_compliant_conversations %>%
separate_rows(aggregated_uses, sep = "; ") %>%
rename(use="aggregated_uses")
write_csv(evaluated_compliant_ideas, "data/evaluated_compliant_ideas.csv")
View(evaluated_compliant_ideas)
evaluated_compliant_ideas <- evaluated_compliant_conversations %>%
separate_rows(aggregated_uses, sep = "; ") %>%
rename(use="aggregated_uses") %>%
distinct(submitter_id, condition, object, use)
evaluated_compliant_ideas %>%
mutate(use = str_to_lower(use)) %>%
group_by(condition) %>%
count(use) %>%
arrange(desc(n)) %>%
print(n=1500)
evaluated_compliant_ideas %>%
mutate(use = str_to_lower(use)) %>%
group_by(condition, object) %>%
count(use) %>%
arrange(desc(n)) %>%
print(n=1500)
noncompliant_conversations %>%
group_by(condition) %>%
summarize(n_distinct(submitter_id))
direct_asks <- read_csv("data/direct_asks.csv") %>%
rename(submitter_id = "ResponseId") %>%
mutate(Condition=case_when(Condition=="passenger"~"Low-Agency",
Condition=="pilot"~"High-Agency")) %>%
rename(condition="Condition")
View(direct_asks)
participant_compliant_similarity <- compliant_similarities %>%
anti_join(unevaluated_conversations, by=c("submitter_id", "object")) %>%
filter(condition %in% c("Low-Agency", "High-Agency")) %>%
group_by(submitter_id, condition) %>%
summarize(mean_similarity = mean(similarity))
compliant_similarities <- iriss_semantic_similarities %>%
anti_join(noncompliant_conversations, by=c("submitter_id", "object")) %>%
anti_join(unevaluated_conversations, by=c("submitter_id", "object")) %>%
mutate(condition=case_when(condition=="Pilot"~"High-Agency",
condition=="Passenger"~"Low-Agency",
condition=="Control"~"Control"))
iriss_semantic_similarities <- read_csv("data/iriss_semantic_similarities.csv") %>%
rename(submitter_id = ResponseId)
compliant_similarities <- iriss_semantic_similarities %>%
anti_join(noncompliant_conversations, by=c("submitter_id", "object")) %>%
anti_join(unevaluated_conversations, by=c("submitter_id", "object")) %>%
mutate(condition=case_when(condition=="Pilot"~"High-Agency",
condition=="Passenger"~"Low-Agency",
condition=="Control"~"Control"))
participant_compliant_similarity <- compliant_similarities %>%
anti_join(unevaluated_conversations, by=c("submitter_id", "object")) %>%
filter(condition %in% c("Low-Agency", "High-Agency")) %>%
group_by(submitter_id, condition) %>%
summarize(mean_similarity = mean(similarity))
direct_ask_similarity <- full_join(direct_asks, participant_compliant_similarity, by=c("submitter_id", "condition")) %>%
mutate(direct_ask_binary = if_else(direct_ask_proportion==0, 0, 1))
View(direct_ask_similarity)
participant_compliant_similarity <- compliant_similarities %>%
filter(condition %in% c("Low-Agency", "High-Agency")) %>%
group_by(submitter_id, condition) %>%
summarize(mean_similarity = mean(similarity))
View(compliant_similarities)
compliant_similarities <- iriss_semantic_similarities %>%
anti_join(noncompliant_conversations, by=c("submitter_id", "object")) %>%
mutate(condition=case_when(condition=="Pilot"~"High-Agency",
condition=="Passenger"~"Low-Agency",
condition=="Control"~"Control"))
participant_compliant_similarity <- compliant_similarities %>%
filter(condition %in% c("Low-Agency", "High-Agency")) %>%
group_by(submitter_id, condition) %>%
summarize(mean_similarity = mean(similarity))
direct_ask_similarity <- full_join(direct_asks, participant_compliant_similarity, by=c("submitter_id", "condition")) %>%
mutate(direct_ask_binary = if_else(direct_ask_proportion==0, 0, 1))
View(direct_ask_similarity)
ggplot(direct_ask_similarity, aes(x=direct_ask_proportion,y=mean_similarity)) +
geom_point() +
stat_smooth()
cor.test(direct_ask_similarity$direct_ask_proportion, direct_ask_similarity$mean_similarity, method="spearman")
direct_ask_sim_model <- lm(mean_similarity ~ direct_ask_proportion + condition + direct_ask_proportion*condition, data = direct_ask_similarity)
summary(direct_ask_sim_model)
direct_ask_sim_model <- lm(mean_similarity ~ direct_ask_proportion*condition, data = direct_ask_similarity)
summary(direct_ask_sim_model)
ggplot(direct_ask_similarity, aes(x=direct_ask_binary, y=mean_similarity)) +
geom_point()
?lm()
direct_ask.log <- glm(direct_ask_binary ~ condition, family = "binomial", data=direct_ask_similarity)
summary(direct_ask.log)
ggplot(aes(x=condition,y=direct_ask_binary)) +
geom_point()
ggplot(direct_ask_similarity, aes(x=condition,y=direct_ask_binary)) +
geom_point()
direct_ask.lm <- lm(mean_similarity ~ direct_ask_binary, data=direct_ask_similarity)
summary(direct_ask.lm)
direct_ask.lm <- lm(mean_similarity ~ direct_ask_binary*condition, data=direct_ask_similarity)
summary(direct_ask.lm)
library(lavaan)
library(mediation)
install.packages("mediation")
library(mediation)
direct_ask_similarity$condition_numeric <- ifelse(df$condition == "High-Agency", 1, 0)
direct_ask_similarity$condition_numeric <- if_else(direct_ask_similarity$condition == "High-Agency", 1, 0)
model_total <- lm(mean_similarity ~ condition_numeric, data = direct_ask_similarity)
summary(model_total)
model_mediator <- lm(direct_ask_binary ~ condition_numeric, data = direct_ask_similarity)
summary(model_mediator)
model_outcome <- lm(mean_similarity ~ condition_numeric + direct_ask_binary, data = direct_ask_similarity)
summary(model_outcome)
set.seed(123)  # for reproducibility
mediation_results <- mediate(
model_mediator,
model_outcome,
treat = "condition_numeric",
mediator = "direct_ask_binary",
boot = TRUE,
sims = 5000
)
summary(mediation_results)
summary(model_outcome)
direct_ask.lm <- lm(mean_similarity ~ direct_ask_binary*condition, data=direct_ask_similarity)
summary(direct_ask.lm)
direct_ask.log <- glm(direct_ask_binary ~ condition, family = "binomial", data=direct_ask_similarity)
summary(direct_ask.log)
?glm()
lm.beta(direct_ask.log)
install.packages("QuantPsych")
install.packages("QuantPsyc")
library(QuantPsyc)
lm.beta(direct_ask.log)
summary(direct_ask.log)
exp(coef(direct_ask.log))
